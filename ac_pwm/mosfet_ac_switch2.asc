Version 4
SHEET 1 1588 728
WIRE 240 -128 -48 -128
WIRE 336 -112 96 -112
WIRE 1056 -112 336 -112
WIRE 96 -64 96 -112
WIRE 96 -64 80 -64
WIRE 112 -64 96 -64
WIRE 336 -64 336 -112
WIRE 16 -32 16 -64
WIRE 16 -32 -144 -32
WIRE 176 -32 176 -64
WIRE 240 -32 240 -128
WIRE 240 -32 176 -32
WIRE 16 0 16 -32
WIRE 96 0 80 0
WIRE 112 0 96 0
WIRE 176 0 176 -32
WIRE 96 64 96 0
WIRE 336 64 336 0
WIRE 336 64 96 64
WIRE 432 64 336 64
WIRE 656 64 512 64
WIRE 928 112 896 112
WIRE -48 128 -48 -128
WIRE 112 128 -48 128
WIRE 240 128 192 128
WIRE 272 128 240 128
WIRE 704 144 480 144
WIRE 272 192 272 128
WIRE 336 192 272 192
WIRE 656 208 656 64
WIRE 704 208 656 208
WIRE 912 208 896 208
WIRE 480 224 480 144
WIRE -48 240 -48 128
WIRE 336 240 336 192
WIRE 240 256 240 128
WIRE 912 272 912 208
WIRE 912 272 752 272
WIRE 752 304 752 272
WIRE 416 320 384 320
WIRE 240 368 240 320
WIRE 240 368 176 368
WIRE 336 368 336 336
WIRE 336 368 240 368
WIRE 416 368 416 320
WIRE 480 368 480 304
WIRE 480 368 416 368
WIRE -144 384 -144 -32
WIRE -48 384 -48 320
WIRE -48 384 -144 384
WIRE 336 400 336 368
WIRE 240 416 240 368
WIRE 416 416 416 368
WIRE 416 416 384 416
WIRE 480 416 480 368
WIRE 752 432 752 384
WIRE 816 432 752 432
WIRE 928 432 928 112
WIRE 928 432 896 432
WIRE 752 464 752 432
WIRE 336 496 288 496
WIRE -48 528 -48 384
WIRE 240 528 240 480
WIRE 240 528 -48 528
WIRE 288 528 288 496
WIRE 288 528 240 528
WIRE 176 624 176 368
WIRE 480 624 480 496
WIRE 480 624 176 624
WIRE 1056 624 1056 -112
WIRE 1056 624 480 624
WIRE 480 656 480 624
FLAG 752 464 0
FLAG 480 656 0
SYMBOL Misc/signal -48 224 R0
SYMATTR InstName V2
SYMATTR Value SINE(0 220 50)
SYMBOL res 208 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 700
SYMBOL Optos/CNY17-1 800 144 R180
SYMATTR InstName U1
SYMBOL nmos 384 240 M0
SYMATTR InstName M2
SYMBOL nmos 384 496 R180
SYMATTR InstName M3
SYMBOL voltage 752 288 R0
SYMATTR InstName V3
SYMATTR Value SINE(3 3 1000)
SYMBOL res 912 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res 528 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL diode 176 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 464 208 R0
SYMATTR InstName R4
SYMATTR Value 15k
SYMBOL res 464 400 R0
SYMATTR InstName R5
SYMATTR Value 15k
SYMBOL diode 16 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL diode 112 -48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL diode 80 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMBOL Misc/EuropeanPolcap 320 -64 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL diode 224 256 R0
SYMATTR InstName D4
SYMBOL diode 256 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
TEXT -40 496 Left 2 !.tran 200ms startup
